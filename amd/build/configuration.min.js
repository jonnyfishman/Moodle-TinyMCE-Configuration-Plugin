define("tiny_configurator/configuration",["exports","editor_tiny/utils","./common"],(function(_exports,_utils,_common){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.configure=void 0;_exports.configure=async instanceConfig=>{const pluginParams=await(async()=>{const pluginName="".concat(_common.component,"/plugin:data");for(;!instanceConfig[pluginName];)await new Promise((resolve=>setTimeout(resolve,100)));return instanceConfig[pluginName].params})();pluginParams.disabledToolbarButtons.split(" ").forEach((button=>{if(button.includes(":")){const parts=button.split(":");instanceConfig.toolbar=(0,_utils.removeToolbarButton)(instanceConfig.toolbar,parts[0],parts[1])}else instanceConfig.toolbar=instanceConfig.toolbar.filter((function(toolbarItem){return toolbarItem.name!==button}))}));const buttonsToAdd=pluginParams.addToolbarButtons.split(" ");instanceConfig.toolbar.forEach(((toolbar,index)=>{buttonsToAdd.forEach((button=>{let name,item;if(button.includes(":")){const parts=button.split(":");name=parts[0],item=parts[1]}else name=button;toolbar.name===name?instanceConfig.toolbar=(0,_utils.addToolbarButton)(instanceConfig.toolbar,name,item):index===instanceConfig.toolbar.length-1&&instanceConfig.toolbar.push({name:button,items:[]})}))}));pluginParams.disabledMenuItems.split(" ").forEach((menuName=>{if(menuName.includes(":")){const parts=menuName.split(":");instanceConfig.menu[parts[0]].items=instanceConfig.menu[parts[0]].items.replace(parts[1],"")}else for(const name in instanceConfig.menu)if(instanceConfig.menu[name]===menuName){delete instanceConfig.menu[name];break}}));pluginParams.addMenuItems.split(" ").forEach((menuItem=>{let section,item;if(console.log(menuItem),menuItem.includes(":")){const parts=menuItem.split(":");section=parts[0],item=" "+parts[1]}else section=menuItem,item="";instanceConfig.menu=(0,_utils.addMenubarItem)(instanceConfig.menu,section,item)}));pluginParams.quickbarsSelectionToolbar.split(" ").forEach((button=>{const escapedButton=button.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");instanceConfig.quickbars_selection_toolbar=instanceConfig.quickbars_selection_toolbar.replace(new RegExp(escapedButton,"g"),"")}));return pluginParams.addQuickbarsSelectionToolbar.split(" ").forEach((button=>{instanceConfig.quickbars_selection_toolbar+=" "+button})),console.log(instanceConfig),instanceConfig}}));

//# sourceMappingURL=configuration.min.js.map